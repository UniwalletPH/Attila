@{
    ViewData["Title"] = "Events";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model EventViewCVM


@section Styles{
    <link href="../assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
}
@if (User.IsInRole("Coordinator"))
{
    <div class="page-head">
        <!-- BEGIN PAGE TITLE -->
        <div class="page-title">
            <div class="btn-group">
                <button id="sample_editable_1_new" class="btn sbold green " onclick="location.href='@Url.Action("BookingForm", "Events")'">
                    Add New Event
                    <i class="fa fa-plus"></i>
                </button>
            </div>
            <div class="btn-group">
                <button id="sample_editable_1_new" class="btn sbold green " onclick="location.href='@Url.Action("Register", "Clients")'">
                    Add New Client
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <!-- END PAGE TITLE -->
        <!-- BEGIN PAGE TOOLBAR -->
        <div class="page-toolbar">

            <!-- BEGIN THEME PANEL -->
            <!-- END THEME PANEL -->
        </div>
        <!-- END PAGE TOOLBAR -->
    </div>
    <!-- END PAGE HEAD-->
    <!-- BEGIN PAGE BREADCRUMB -->
    <ul class="page-breadcrumb breadcrumb">
    </ul>







    <div class="row">

        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-dark">
                        <i class="icon-settings font-dark"></i>
                        <span class="caption-subject bold uppercase">In Process Events</span>
                    </div>

                </div>
                <div class="portlet-body">
                    <div class="table-toolbar">
                        <div class="row">
                            <div class="col-md-6">

                            </div>
                        </div>
                    </div>

                    <table class="table table-striped table-bordered table-hover order-column events" id="sample_1">
                        <thead>
                            <tr>

                                <th> Event Date </th>
                                <th> Booking Date </th>
                                <th> Event Name </th>
                                <th> Client </th>
                                <th> Coordinator </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in Model.ProcessingEvent)
                            {
                                <tr data-id="@item.ID">
                                    <td>@Html.DisplayFor(modelItem => item.EventDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.BookingDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.EventName)</td>
                                    <td> @Html.DisplayFor(modelItem => item.Client.Name)  </td>
                                    <td> @Html.DisplayFor(modelItem => item.Coordinator.Name) | @Html.DisplayFor(modelItem => item.Coordinator.Position)  </td>
                                    <td>    <button type="button" class="btn dark btn-outline view"> See Event Details</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline add-menu"> Add Menu Details</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline add-additional"> Add Additional</button>  </td>

                                    <td>    <button type="button" class="btn dark btn-outline change-status"> Submit For Approval</button>  </td>
                                </tr>
                            }


                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->




        </div>
    </div>

}

@if (User.IsInRole("Coordinator") || User.IsInRole("Admin"))
{
    <div class="row">

        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-dark">
                        <i class="icon-settings font-dark"></i>
                        <span class="caption-subject bold uppercase">Pending Events</span>
                    </div>

                </div>
                <div class="portlet-body">
                    @*<div class="table-toolbar">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="btn-group">
                                        <button id="sample_editable_1_new" class="btn sbold green " onclick="location.href='@Url.Action("BookingForm", "Events")'">
                                            Add New Event
                                            <i class="fa fa-plus"></i>
                                        </button>
                                    </div>
                                    <div class="btn-group">
                                        <button id="sample_editable_1_new" class="btn sbold green " onclick="location.href='@Url.Action("Register", "Clients")'">
                                            Add New Client
                                            <i class="fa fa-plus"></i>
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>*@

                    <table class="table table-striped table-bordered table-hover order-column pendingevents" id="sample_1">
                        <thead>
                            <tr>

                                <th> Event Date </th>
                                <th> Booking Date </th>
                                <th> Event Name </th>
                                <th> Client </th>
                                <th> Coordinator </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in Model.PendingEvent)
                            {
                                <tr data-id="@item.ID">
                                    <td>@Html.DisplayFor(modelItem => item.EventDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.BookingDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.EventName)</td>
                                    <td> @Html.DisplayFor(modelItem => item.Client.Name)   </td>
                                    <td> @Html.DisplayFor(modelItem => item.Coordinator.Name)  </td>
                                    <td>    <button type="button" class="btn dark btn-outline view"> See Event Details</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline update-price"> Update Price</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline view-payment"> View Payment</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline add-payment"> Add Payment</button>  </td>

                                </tr>
                            }


                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->




        </div>
    </div>

    <div class="row">

        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-dark">
                        <i class="icon-settings font-dark"></i>
                        <span class="caption-subject bold uppercase">Incoming Events</span>
                    </div>

                </div>
                <div class="portlet-body">


                    <table class="table table-striped table-bordered table-hover order-column incomingevents" id="sample_2">
                        <thead>
                            <tr>

                                <th> Event Date </th>
                                <th> Booking Date </th>
                                <th> Event Name </th>
                                <th> Client </th>
                                <th> Coordinator </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in Model.IncomingEvent)
                            {

                                <tr data-id="@item.ID">
                                    <td>@Html.DisplayFor(modelItem => item.EventDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.BookingDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.EventName)</td>
                                    <td> @Html.DisplayFor(modelItem => item.Client.Name)  </td>
                                    <td> @Html.DisplayFor(modelItem => item.Coordinator.Name)    </td>
                                    <td>    <button type="button" class="btn dark btn-outline view"> See Event Details</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline update-price"> Update Price</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline view-payment"> View Payment</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline add-payment"> Add Payment</button>  </td>
                                </tr>

                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->




        </div>
    </div>

    <div class="row">

        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-dark">
                        <i class="icon-settings font-dark"></i>
                        <span class="caption-subject bold uppercase">Incoming Events</span>
                    </div>

                </div>
                <div class="portlet-body">


                    <table class="table table-striped table-bordered table-hover order-column incomingevents" id="sample_2">
                        <thead>
                            <tr>

                                <th> Event Date </th>
                                <th> Booking Date </th>
                                <th> Event Name </th>
                                <th> Client </th>
                                <th> Coordinator </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in Model.IncomingEvent)
                            {

                                <tr data-id="@item.ID">
                                    <td>@Html.DisplayFor(modelItem => item.EventDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.BookingDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.EventName)</td>
                                    <td> @Html.DisplayFor(modelItem => item.Client.Name)  </td>
                                    <td> @Html.DisplayFor(modelItem => item.Coordinator.Name)    </td>
                                    <td>    <button type="button" class="btn dark btn-outline view"> See Event Details</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline update-price"> Update Price</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline view-payment"> View Payment</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline add-payment"> Add Payment</button>  </td>
                                </tr>

                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->




        </div>
    </div>

    <div class="row">

        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-dark">
                        <i class="icon-settings font-dark"></i>
                        <span class="caption-subject bold uppercase">Past Events</span>
                    </div>

                </div>
                <div class="portlet-body">
                    <div class="table-toolbar">
                        <div class="row">

                        </div>
                    </div>

                    <table class="table table-striped table-bordered table-hover order-column pastevents" id="sample_3 ">
                        <thead>
                            <tr>

                                <th> Event Date </th>
                                <th> Booking Date </th>
                                <th> Event Name </th>
                                <th> Client </th>
                                <th> Coordinator </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                                <th>  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in Model.PastEvent)
                            {
                                <tr data-id="@item.ID">
                                    <td>@Html.DisplayFor(modelItem => item.EventDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.BookingDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.EventName)</td>
                                    <td> @Html.DisplayFor(modelItem => item.Client.Name)  </td>
                                    <td> @Html.DisplayFor(modelItem => item.Coordinator.Name)   </td>

                                    <td>    <button type="button" class="btn dark btn-outline view"> See Event Details</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline update-price"> Update Price</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline view-payment"> View Payment</button>  </td>
                                    <td>    <button type="button" class="btn dark btn-outline add-payment"> Add Payment</button>  </td>

                                </tr>
                            }


                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->




        </div>
    </div>
}


@if (User.IsInRole("InventoryManager"))
{<div class="row">

        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-dark">
                        <i class="icon-settings font-dark"></i>
                        <span class="caption-subject bold uppercase">Incoming Events</span>
                    </div>

                </div>
                <div class="portlet-body">


                    <table class="table table-striped table-bordered table-hover order-column incomingevents" id="sample_2">
                        <thead>
                            <tr>

                                <th> Event Date </th>
                                <th> Booking Date </th>
                                <th> Event Name </th>
                                <th> Client </th>
                                <th> Coordinator </th>
                                <th>  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in Model.IncomingEvent)
                            {

                                <tr data-id="@item.ID">
                                    <td>@Html.DisplayFor(modelItem => item.EventDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.BookingDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.EventName)</td>
                                    <td> @Html.DisplayFor(modelItem => item.Client.Name)  </td>
                                    <td> @Html.DisplayFor(modelItem => item.Coordinator.Name)    </td>
                                    <td>    <button type="button" class="btn dark btn-outline view"> See Event Details</button>  </td>
                                </tr>

                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->




        </div>
    </div>

    <div class="row">

        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-dark">
                        <i class="icon-settings font-dark"></i>
                        <span class="caption-subject bold uppercase">Past Events</span>
                    </div>

                </div>
                <div class="portlet-body">
                    <div class="table-toolbar">
                        <div class="row">

                        </div>
                    </div>

                    <table class="table table-striped table-bordered table-hover order-column pastevents" id="sample_3 ">
                        <thead>
                            <tr>

                                <th> Event Date </th>
                                <th> Booking Date </th>
                                <th> Event Name </th>
                                <th> Client </th>
                                <th> Coordinator </th>
                                <th>  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in Model.PastEvent)
                            {
                                <tr data-id="@item.ID">
                                    <td>@Html.DisplayFor(modelItem => item.EventDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.BookingDate)</td>
                                    <td> @Html.DisplayFor(modelItem => item.EventName)</td>
                                    <td> @Html.DisplayFor(modelItem => item.Client.Name)  </td>
                                    <td> @Html.DisplayFor(modelItem => item.Coordinator.Name)   </td>

                                    <td>    <button type="button" class="btn dark btn-outline view"> See Event Details</button>  </td>

                                </tr>
                            }


                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->




        </div>
    </div>
}
@section Scripts {


    <script>


            $(document).on('click', 'tr .view', function (e) {

                id = $(this).closest('tr').attr('data-id');



            var url = '@Url.Action("Details", "Events", new { EventID = "__id__" })';
            window.location.href = url.replace('__id__', id);


        });

            $(document).on('click', 'tr .add-menu', function (e) {

                id = $(this).closest('tr').attr('data-id');


                var url = '@Url.Action("MenuForm", "Events", new { EventID = "__id__" })';
            window.location.href = url.replace('__id__', id);


            });

             $(document).on('click', 'tr .add-additional', function (e) {

                id = $(this).closest('tr').attr('data-id');


                var url = '@Url.Action("Additional", "Events", new { EventID = "__id__" })';
                window.location.href = url.replace('__id__', id);


            });

            $(document).on('click', 'tr .change-status', function (e) {

                id = $(this).closest('tr').attr('data-id');



            var url = '@Url.Action("ChangeStatus", "Events", new { EventID = "__id__" })';
            window.location.href = url.replace('__id__', id);

            });


            $(document).on('click', 'tr .view', function (e) {

                id = $(this).closest('tr').attr('data-id');



            var url = '@Url.Action("Details", "Events", new { EventID = "__id__" })';
            window.location.href = url.replace('__id__', id);
            });


        $(document).on('click', 'tr .add-payment', function (e) {

            id = $(this).closest('tr').attr('data-id');
            var url = '@Url.Action("AddPayment", "Payment", new { EventID = "__id__" })';
            window.location.href = url.replace('__id__', id);


        });

        $(document).on('click', 'tr .view-payment', function (e) {
            try {
                 id = $(this).closest('tr').attr('data-id');
            var url = '@Url.Action("Record", "Payment", new { EventID = "__id__" })';
            window.location.href = url.replace('__id__', id);
            }
            catch (err) { alert(err); }
        });
    </script>



    <script src="../assets/global/scripts/datatable.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL SCRIPTS -->
    <script src="../assets/global/scripts/app.min.js" type="text/javascript"></script>
    <!-- END THEME GLOBAL SCRIPTS -->
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="../assets/pages/scripts/table-datatables-managed.min.js" type="text/javascript"></script>


}