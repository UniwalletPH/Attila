@model Attila.UI.Models.AddEventMenuCVM
@{

    Layout = "~/Views/Shared/_Layout.cshtml";

}

<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title">
        <h1>
            Menu Form
            <small> </small>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
    <!-- BEGIN PAGE TOOLBAR -->
    <div class="page-toolbar">

        <!-- BEGIN THEME PANEL -->
        <!-- END THEME PANEL -->
    </div>
    <!-- END PAGE TOOLBAR -->
</div>
<!-- END PAGE HEAD-->
<!-- BEGIN PAGE BREADCRUMB -->
<ul class="page-breadcrumb breadcrumb">
</ul>
<div class="row">
    <div class="col-md-12">
        <!-- Begin: life time stats -->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-dark">
                    <i class="icon-settings font-dark"></i>
                    <span class="caption-subject bold uppercase">Event: @Model.Event.EventName | @Model.Event.EventDate</span>
                </div>

            </div>
            <div class="portlet-body form">
                <form role="form" asp-controller="Events" asp-action="AddMenu" data-ajax="true" data-ajax-method="post" data-ajax-success="OnSuccess" data-ajax-failure="OnFailure">
                    <div class="form-body">

                        <input type="hidden" class="form-control" asp-for="EventID" readonly>

                        <div class="form-actions">
                            @{
                                foreach (var group in Model.Groupings)
                                {
                                    <div class="form-group">
                                        <h2>[@group.Key.Category]  -- Select One --</h2>
                                    </div>

                                    foreach (var item in group)
                                    {
                                        <div class="checkbox"></div>
                                        <label>
                                            <input type="checkbox"  
                                                   name="SelectedMenu"
                                                   class="@group.Key.Category"
                                                   onclick="CheckBox('.@group.Key.Category')"
                                                   value="@item.MenuID" @if (Model.SelectedMenu.Contains(item.MenuID))
                                                   {
                                   <text> checked </text> 
                                                   } /> @item.Menu.Name
                                            </label>
                                    }
                                }
                            }
                        </div>

                    </div>


                    <div class="form-actions">
                        <button type="submit" id="btnSubmit" class="btn blue">Submit</button>
                        <button type="button" class="btn default">Cancel</button>
                    </div>

                </form>

            </div>



        </div>
    </div>
    <!-- End: life time stats -->
</div>

@section Scripts{
    <script>
        
        function OnSuccess(e) {

            $("#success").modal('show');
        }   
        
        function CheckBox(x) {
            $(x).click(function () {
                $(x).not(this).prop('checked', false);
            });   
        }


    </script>


    <partial name="_ValidationScriptsPartial" />

}


<div class="modal fade" id="success" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close view" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title"> Added Successfully.</h4>
            </div>
            <div class="modal-body">Menus Added to Event successfully.</div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline view" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>